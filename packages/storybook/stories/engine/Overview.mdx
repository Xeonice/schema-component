import { Meta } from '@storybook/blocks'

<Meta title="Engine/Overview" />

# @schema-component/engine

@schema-component/engine æ˜¯ä¸€ä¸ªå¼ºå¤§çš„ã€æ¨¡å—åŒ–çš„å¼•æ“ç³»ç»Ÿï¼Œä¸º schema-component é¡¹ç›®æä¾›æ ¸å¿ƒåŠŸèƒ½æ”¯æŒã€‚

## ğŸ¯ æ ¸å¿ƒç‰¹æ€§

### æ¨¡å—åŒ–æ¶æ„
å¼•æ“é‡‡ç”¨åˆ†å±‚ã€æ¨¡å—åŒ–è®¾è®¡ï¼Œæ¯ä¸ªæ¨¡å—ç‹¬ç«‹ä¸”å¯ç»„åˆä½¿ç”¨ï¼š

- **Core** - æ ¸å¿ƒæ¨¡å‹ç³»ç»Ÿï¼Œæ”¯æŒå£°æ˜å¼æ¨¡å‹å®šä¹‰
- **DI** - ä¾èµ–æ³¨å…¥å®¹å™¨ï¼Œç®¡ç†æœåŠ¡ç”Ÿå‘½å‘¨æœŸ
- **Event** - äº‹ä»¶æ€»çº¿ï¼Œå®ç°ç»„ä»¶é—´è§£è€¦é€šä¿¡
- **HTTP** - HTTP å®¢æˆ·ç«¯ï¼Œæ”¯æŒæ‹¦æˆªå™¨å’Œé‡è¯•é€»è¾‘
- **State** - çŠ¶æ€ç®¡ç†ï¼ŒåŸºäº MobX çš„å“åº”å¼çŠ¶æ€
- **Repository** - ä»“å‚¨æ¨¡å¼ï¼ŒæŠ½è±¡æ•°æ®è®¿é—®å±‚
- **Render** - æ¸²æŸ“ç³»ç»Ÿï¼Œæ”¯æŒå¤šå±‚æ¸²æŸ“æ¶æ„

### å‡½æ•°å¼ä¼˜å…ˆ
æ‰€æœ‰æ ¸å¿ƒ API éƒ½é‡‡ç”¨å‡½æ•°å¼è®¾è®¡ï¼š
- APIs/Actions/Views éƒ½æ˜¯å¯æ‰§è¡Œå‡½æ•°
- æ”¯æŒå‡½æ•°ç»„åˆå’Œé«˜é˜¶å‡½æ•°
- ç±»å‹å®‰å…¨ä¸”æ˜“äºæµ‹è¯•

### ç±»å‹å®‰å…¨
å®Œæ•´çš„ TypeScript æ”¯æŒï¼š
- ä¸¥æ ¼çš„ç±»å‹æ£€æŸ¥
- æ™ºèƒ½çš„ç±»å‹æ¨å¯¼
- ä¼˜ç§€çš„ IDE æ”¯æŒ

## ğŸ“– å¿«é€Ÿå¼€å§‹

```typescript
import { createEngineContext } from '@schema-component/engine'

// åˆ›å»ºå¼•æ“ä¸Šä¸‹æ–‡
const engine = createEngineContext({
  apiBaseUrl: 'https://api.example.com',
  debug: true
})

// åˆå§‹åŒ–
await engine.initialize()

// ä½¿ç”¨ DI å®¹å™¨
const service = engine.get(SERVICE_TYPE)

// ä½¿ç”¨äº‹ä»¶æ€»çº¿
const eventBus = engine.getEventBus()
eventBus.subscribe('event:type', handler)
```

## ğŸ—ï¸ æ¶æ„æ¦‚è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            Application Layer                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Render  â”‚  â”‚  State   â”‚  â”‚   HTTP   â”‚ â”‚
â”‚  â”‚  Layer   â”‚  â”‚  Layer   â”‚  â”‚  Client  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â”‚
â”‚       â”‚             â”‚             â”‚        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚       â”‚             â”‚             â”‚        â”‚
â”‚  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Repositoryâ”‚  â”‚  Event   â”‚  â”‚    DI    â”‚ â”‚
â”‚  â”‚  Pattern  â”‚  â”‚   Bus    â”‚  â”‚Container â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â”‚
â”‚       â”‚              â”‚             â”‚        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚              â”‚  Core Engine   â”‚             â”‚
â”‚              â”‚ Model Registry â”‚             â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“š æ¨¡å—å¯¼è§ˆ

### [Core](/docs/engine-core-overview)
æ ¸å¿ƒæ¨¡å‹ç³»ç»Ÿï¼Œæä¾›æ¨¡å‹å®šä¹‰ã€æ³¨å†Œå’Œæ‰§è¡Œèƒ½åŠ›ã€‚

**ä¸»è¦åŠŸèƒ½**:
- `defineModel` - å®šä¹‰æ¨¡å‹
- `ModelRegistry` - æ¨¡å‹æ³¨å†Œç®¡ç†
- `ModelExecutor` - æ¨¡å‹æ‰§è¡Œå™¨
- `EngineContext` - å¼•æ“ä¸Šä¸‹æ–‡

### [DI (Dependency Injection)](/docs/engine-di-overview)
ä¾èµ–æ³¨å…¥å®¹å™¨ï¼Œç®¡ç†æœåŠ¡çš„åˆ›å»ºå’Œç”Ÿå‘½å‘¨æœŸã€‚

**ä¸»è¦åŠŸèƒ½**:
- Service ç»‘å®šå’Œè§£æ
- Singleton/Transient ç”Ÿå‘½å‘¨æœŸ
- è£…é¥°å™¨æ”¯æŒ (`@Injectable`, `@Inject`)

### [Event](/docs/engine-event-overview)
ç±»å‹å®‰å…¨çš„äº‹ä»¶æ€»çº¿ç³»ç»Ÿã€‚

**ä¸»è¦åŠŸèƒ½**:
- å‘å¸ƒ/è®¢é˜…æ¨¡å¼
- äº‹ä»¶ä¼˜å…ˆçº§
- é€šé…ç¬¦è®¢é˜…
- äº‹ä»¶å†å²è¿½è¸ª

### [HTTP](/docs/engine-http-overview)
åŠŸèƒ½ä¸°å¯Œçš„ HTTP å®¢æˆ·ç«¯ã€‚

**ä¸»è¦åŠŸèƒ½**:
- è¯·æ±‚/å“åº”æ‹¦æˆªå™¨
- è‡ªåŠ¨é‡è¯•æœºåˆ¶
- è¶…æ—¶æ§åˆ¶
- REST API åŒ…è£…å™¨

### [State](/docs/engine-state-overview)
åŸºäº MobX çš„å“åº”å¼çŠ¶æ€ç®¡ç†ã€‚

**ä¸»è¦åŠŸèƒ½**:
- `ModelStore` - æ¨¡å‹çŠ¶æ€å­˜å‚¨
- è‡ªåŠ¨æ´¾ç”Ÿè®¡ç®—
- å“åº”å¼æ›´æ–°
- ä¸æ¨¡å‹ç³»ç»Ÿæ— ç¼é›†æˆ

### [Repository](/docs/engine-repository-overview)
æ•°æ®è®¿é—®æŠ½è±¡å±‚ã€‚

**ä¸»è¦åŠŸèƒ½**:
- ç»Ÿä¸€çš„ CRUD æ¥å£
- HTTP Repository å®ç°
- Mock Repositoryï¼ˆç”¨äºæµ‹è¯•ï¼‰
- è‡ªå®šä¹‰ Repository æ”¯æŒ

### [Render](/docs/engine-render-overview)
å¤šå±‚æ¸²æŸ“æ¶æ„ç³»ç»Ÿã€‚

**ä¸»è¦åŠŸèƒ½**:
- `RenderEngine` - æ¸²æŸ“å¼•æ“æ ¸å¿ƒ
- `ActionQueue` - ä¼˜å…ˆçº§åŠ¨ä½œé˜Ÿåˆ—
- `ViewStack` - è§†å›¾æ ˆç®¡ç†
- ä¸‰å±‚æ¸²æŸ“æ¶æ„ï¼ˆStatic/Dynamic/Effectsï¼‰

## ğŸ§ª ç¤ºä¾‹ä»£ç 

æŸ¥çœ‹å·¦ä¾§å¯¼èˆªæ ä¸­çš„å„ä¸ªæ¨¡å—ï¼Œæ¢ç´¢äº¤äº’å¼ç¤ºä¾‹ï¼š

- **Getting Started** - å¿«é€Ÿå…¥é—¨ç¤ºä¾‹
- **Core Examples** - æ ¸å¿ƒæ¨¡å—ç¤ºä¾‹
- **DI Examples** - ä¾èµ–æ³¨å…¥ç¤ºä¾‹
- **Event Examples** - äº‹ä»¶ç³»ç»Ÿç¤ºä¾‹
- **HTTP Examples** - HTTP å®¢æˆ·ç«¯ç¤ºä¾‹
- **State Examples** - çŠ¶æ€ç®¡ç†ç¤ºä¾‹
- **Repository Examples** - ä»“å‚¨æ¨¡å¼ç¤ºä¾‹
- **Render Examples** - æ¸²æŸ“ç³»ç»Ÿç¤ºä¾‹

## ğŸ“– è®¾è®¡æ–‡æ¡£

æ·±å…¥äº†è§£å¼•æ“çš„æ¶æ„è®¾è®¡ï¼š

- [æ¸²æŸ“æ¶æ„è®¾è®¡](/docs/engine-docs-renderarchitecture)
- [æ¸²æŸ“è¯¦ç»†è®¾è®¡](/docs/engine-docs-renderdesign)
- [æ¸²æŸ“åˆ†å±‚è®¾è®¡](/docs/engine-docs-renderlayerdesign)
- [Action æ¸²æŸ“å™¨è®¾è®¡](/docs/engine-docs-actionrendererdesign)

## ğŸ”— ç›¸å…³é“¾æ¥

- [GitHub Repository](https://github.com/Xeonice/schema-component)
- [API å‚è€ƒæ–‡æ¡£](#)
- [å®Œæ•´ç¤ºä¾‹ä»£ç ](https://github.com/Xeonice/schema-component/tree/main/packages/engine/examples)
